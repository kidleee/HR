<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8"/>
<title>在线简历</title>
<meta name="keywords" content="" />
<meta name="description" content="" />
<link rel="shortcut icon" href="favicon.ico" />
<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
<link rel="stylesheet" type="text/css" href="css/style.css"/>
<script src="layui-v2.2.6/layui-v2.2.6/layui/layui.js" type="text/javascript" charset="utf-8"></script>    
<script type="text/javascript" src="js/jquery1.42.min.js" ></script>
<script type="text/javascript" src="js/jquery.SuperSlide.2.1.1.js"></script>
<script type="text/javascript" src="js/sifang.js" ></script> 
<script src="jquery.js"></script>
<script src="jquery-ui.js" type="text/javascript" charset="utf-8"></script>    
<script src="Sortable-master/Sortable-master/Sortable.js"></script>    
<script type="text/javascript">
function openShutManager(oSourceObj,oTargetObj,shutAble,oOpenTip,oShutTip){
var sourceObj = typeof oSourceObj == "string" ? document.getElementById(oSourceObj) : oSourceObj;
var targetObj = typeof oTargetObj == "string" ? document.getElementById(oTargetObj) : oTargetObj;
var openTip = oOpenTip || "";
var shutTip = oShutTip || "";
if(targetObj.style.display!="none"){
   if(shutAble) return;
   targetObj.style.display="none";
   if(openTip  &&  shutTip){
    sourceObj.innerHTML = shutTip; 
   }
} else {
   targetObj.style.display="block";
   if(openTip  &&  shutTip){
    sourceObj.innerHTML = openTip; 
   }
}
}
</script>
</head>
<body>
<div class="top">
	<div class="cont">
		<img src="img/i_tz.png" alt="" /><span>网站公告：</span>公告内容公告内容公告内容公告内容公告内容公告内容公告内容公告内容公告内容
		<a href="#" id="close"><img src="img/i_close.png"/></a>
	</div>
</div>
<!--neck-->
<div class="neck">
	<div class="cont">
		<div class="logo">
			<a href="http:\\www.runjianli.com"><img src="img/logo.png"/></a>
		</div>
		<div class="nav">
			<ul>
				<li class="on"><a href="cvedit.html">简历制作</a></li>
				<li><a href="viewmodel.html">模板商城</a></li>
				<li><a href="headhunter.html">名企导师</a></li>
				<li><a href="howtohr.html">加入我们</a></li>
				<li><a href="#"><img src="img/i_dhs.png" alt="" /></a>
					<div class="nav_down">
					<dl>
						<dd><a href="aboutus.html">关于我们1</a></dd>
						<dd><a href="aboutus.html">关于我们2</a></dd>
						<dd><a href="aboutus.html">关于我们3</a></dd>
					</dl>
					</div>
				</li>
				<div id="img" class="hyzx" style="display:none">
					<div class="tx">
					<img id="imgurl" src="?"/>
					<div class="hy_down">
					<dl>
						<dd><a href="gerenzhongxin1.html">个人中心</a></dd>
						<dd><a href="gerenzhongxin2.html">我的简历</a></dd>
						<dd><a href="javascript:signout();">退出</a></dd>
					</dl>
					</div>
					</div>
				</div>
				<span id="login" class="reg">
					<a href="login.html">登陆</a><img src="img/xt1.png"/>
					<a href="login.html">注册</a>
				</span>
			</ul>
		</div>
	</div>
</div>
<div class="main">
<div class="weizhi">
	<div class="cont">
	<a href="#">在线编辑</a> > 在线编辑简历
	</div>
</div>

<div class="main dcjl">    
<div class="cont">
<div class="jlbox">
	<div class="shadow">
	<!--startprint-->
	<div class="jl2_box">
		<div class="jl2_cat" id="jl2_cat">在线编辑简历  <span>在线编辑简历</span></div>	
		<div class="jl2_left" id="jl2_left">
			<div class="mk1"><img src="img/i_mb.png"/>模板管理 <a onclick="openShutManager(this,'fbox1',false,'<i></i>','<u></u>')"><i></i></a></div>
			<div id="fbox1">
			<div class="mk2">
				<h3>已有模块</h3>
				<!--div class="bt1">基本信息 <span>必填</span></div-->
				<ul id="ulshow">
					<li id="gerenjianjieshow" style="display:block;"><a href="javascript:hide('gerenjianjie')">个人简介</a><a href="javascript:hide('gerenjianjie')"><img src="img/i_jian.png" /></a></li>
					<li id="qiuzhiyixiangshow" style="display:block;"><a href="javascript:hide('qiuzhiyixiang')">求职意向</a><a href="javascript:hide('qiuzhiyixiang')"><img src="img/i_jian.png" /></a></li>
					<li id="gongzuojinglishow" style="display:block;"><a href="javascript:hide('gongzuojingli')">工作经历</a><a href="javascript:hide('gongzuojingli')"><img src="img/i_jian.png" /></a></li>
					<li id="jibenxinxishow" style="display:block;"><a href="javascript:hide('jibenxinxi')">基本信息</a><a href="javascript:hide('jibenxinxi')"><img src="img/i_jian.png" /></a></li>
					<li id="lianxifangshishow" style="display:block;"><a href="javascript:hide('lianxifangshi')">联系方式</a><a href="javascript:hide('lianxifangshi')"><img src="img/i_jian.png" /></a></li>
					<li id="jinengzhengshushow" style="display:block;"><a href="javascript:hide('jinengzhengshu')">技能证书</a><a href="javascript:hide('jinengzhengshu')"><img src="img/i_jian.png" /></a></li>
                    <li id="shixijingyanshow" style="display:none;"><a href="javascript:hide('shixijingyan')">实习经验</a><a href="javascript:hide('shixijingyan')"><img src="img/i_jian.png" /></a></li>
                    <li id="xiangmujingyanshow" style="display:none;"><a href="javascript:hide('xiangmujingyan')">项目经验</a><a href="javascript:hide('xiangmujingyan')"><img src="img/i_jian.png" /></a></li>
				</ul>
			</div>
			
			<div class="mk2">
				<h3>可添加模块</h3>
				<div class="bt1">简历封面 <span><img src="img/i_suo.png" /></span></div>
				<div class="bt1">自荐信 <span><img src="img/i_suo.png" /></span></div>
				
				<ul id="ulhide">
                    <li style="display:block;"><a href="javascript:rightcreate()">模块添加</a><a href="javascript:rightcreate()"><img src="img/i_jia.png" /></a></li>
                    <li id="gerenjianjiehide" style="display:none;"><a href="javascript:show('gerenjianjie')">个人简介</a><a href="javascript:show('gerenjianjie')"><img src="img/i_jia.png" /></a></li>
                    <li id="qiuzhiyixianghide" style="display:none;"><a href="javascript:show('qiuzhiyixiang')">求职意向</a><a href="javascript:show('qiuzhiyixiang')"><img src="img/i_jia.png" /></a></li>
                    <li id="gongzuojinglihide" style="display:none;"><a href="javascript:show('gongzuojingli')">工作经历</a><a href="javascript:show('gongzuojingli')"><img src="img/i_jia.png" /></a></li>
                    <li id="jibenxinxihide" style="display:none;"><a href="javascript:show('jibenxinxi')">基本信息</a><a href="javascript:show('jibenxinxi')"><img src="img/i_jia.png" /></a></li>
                    <li id="lianxifangshihide" style="display:none;"><a href="javascript:show('lianxifangshi')">联系方式</a><a href="javascript:show('lianxifangshi')"><img src="img/i_jia.png" /></a></li>
                    <li id="jinengzhengshuhide" style="display:none;"><a href="javascript:show('jinengzhengshu')">技能证书</a><a href="javascript:show('jinengzhengshu')"><img src="img/i_jia.png" /></a></li>
					<li id="shixijingyanhide" style="display:block;"><a href="javascript:show('shixijingyan')">实习经验</a><a href="javascript:show('shixijingyan')"><img src="img/i_jia.png" /></a></li>
					<li id="xiangmujingyanhide" style="display:block;"><a href="javascript:show('xiangmujingyan')">项目经验</a><a href="javascript:show('xiangmujingyan')"><img src="img/i_jia.png" /></a></li>
				</ul>
			</div>
			</div>
			
			
			
			<div class="mk1"><img src="img/i_fg.png"/>模板切换<a onclick="openShutManager(this,'fbox3',false,'<i></i>','<u></u>')"><i></i></a></div>
			<div class="mk2" id="fbox3">
			<div class="bt1">模板S10004<span><img src="img/i_suo.png" /></span></div>
			<ul>
				<li><a href="javascript:modelchange('S10005')">模板S10005</a></li>
			</ul>
			</div>
            <div class="mk4"><a href="javascript:cv_save()" style="margin-bottom: 10px">简历保存</a></div>
			<div class="mk4">
			<a href="javascript:cv_input()"><img src="img/i_dc.png"/>简历导出</a>
			</div>	
		</div>
		<div class="jl2_right" id="module_list">
			<div class="jl2_main">
				<div class="jl1">
					<div class="jl1_name">
                    <span id="cvname" onclick="jl1information()" class="placeholder" placeholder="润简历">润简历</span><br/>
					<p id="cvjob" onclick="jl1information()" class="placeholder" placeholder="项目经理/项目负责人">项目经理/项目负责人</p>
					</div>
					<div class="jl1_pic placeholder">
					<form style="display:none;" id="tf">
                        <input type="file" id="headimg" name="headimg" change="postheadimg();"/>
                    </form>
					<img id="headimg1" src="img/i_tx2.png" alt="" style="width:154px;height:154px" onclick="headimg.click()"/>
					</div>
					<div class="jl1_lx">
                    <span id="cvdate" onclick="jl1information()" class="placeholder" placeholder="1991.11.06">1991.11.06</span><br/>
					<p id="cvphone" onclick="jl1information()" class="placeholder" placeholder="135 4656 4563">135 4656 4563</p>
					</div>
				</div>
				<div class="jl2_wrap">
				   <div class="zbox">
				      <ul id="left_ul">
				      	<li class="m_title" id="gerenjianjie" style="display:block;">
                        <div class="jl_title"><h3 class="handle">个人简介</h3></div>
						<div class="info changeable placeholder" placeholder="毕业于湖北武汉职业技术学院，4年平面设计工作，我不是什么牛人我只是菜鸟，已在成长中。从事网站的建设与分析，有美丽的幻想，从学习到工作一直从事设计。" contenteditable="false">毕业于湖北武汉职业技术学院，4年平面设计工作，我不是什么牛人我只是菜鸟，已在成长中。从事网站的建设与分析，有美丽的幻想，从学习到工作一直从事设计。</div>
						</li>
						
						<li class="m_title" id="qiuzhiyixiang">
                        <div class="jl_title"><h3 class="handle">求职意向<a class="addpartA" href="javascript:"><img src="img/i_bj.png" /></a></h3></div>
						<div class="info">
						<div class="jb1" id="qiuzhiyixiang1">
                            <div class="m_part"><div class="inline changeable placeholder" placeholder="职位">职位</div>：<div class="inline changeable placeholder" placeholder="淘宝美工/平面设计">淘宝美工/平面设计</div><img class="deletepart" src="img/i_jian.png"><br/></div>
                            <div class="m_part"><div class="inline changeable placeholder" placeholder="薪资">薪资</div>：<div class="inline changeable placeholder" placeholder="4000~5000元/月">4000~5000元/月</div><img class="deletepart" src="img/i_jian.png"><br/></div>
                            <div class="m_part"><div class="inline changeable placeholder" placeholder="地点">地点</div>：<div class="inline changeable placeholder" placeholder="湖北武汉">湖北武汉</div><img class="deletepart" src="img/i_jian.png"><br/></div>
						</div>
						</div>
						</li>
						
						<li class="m_title" id="gongzuojingli">
                        <div class="jl_title"><h3 class="handle">工作经历<a class="addpartB" href="javascript:"><img src="img/i_bj.png" /></a></h3></div>
						<dl class="d3" id="gongzuojingli1">
							<dd class="addpart">
							<div class="changeable placeholder h3" placeholder="湖北活动科技网络公司">湖北活动科技网络公司</div><img class="deletepart" src="img/i_jian.png">
							<div class="zhi">
                            <div class="changeable placeholder inline" placeholder="高级网页设计师">高级网页设计师</div>
                            <div class="changeable placeholder inline" placeholder="2003.04-2007.05">2003.04-2007.05</div>
							</div>
							<div class="txt changeable placeholder" placeholder="主要做设计主要做设计主要做设计主要做设计主要做设计主要做设计主要做设计主要做设计主要做设计主要做设计主要做设计主要做设计主要做设计主要做设计">主要做设计主要做设计主要做设计主要做设计主要做设计主要做设计主要做设计主要做设计主要做设计主要做设计主要做设计主要做设计主要做设计主要做设计</div>
							</dd>
							
							<dd class="addpart">
							<div class="changeable placeholder h3" placeholder="湖北活动科技网络公司">湖北活动科技网络公司</div><img class="deletepart" src="img/i_jian.png">
							<div class="zhi">
                            <div class="changeable placeholder inline" placeholder="高级网页设计师">高级网页设计师</div>
                            <div class="changeable placeholder inline" placeholder="2003.04-2007.05">2003.04-2007.05</div>
							</div>
							<div class="txt changeable placeholder" placeholder="主要做设计主要做设计主要做设计主要做设计主要做设计主要做设计主要做设计主要做设计主要做设计主要做设计主要做设计主要做设计主要做设计主要做设计">主要做设计主要做设计主要做设计主要做设计主要做设计主要做设计主要做设计主要做设计主要做设计主要做设计主要做设计主要做设计主要做设计主要做设计</div>
							</dd>
						</dl>
						</li>
                        <li class="m_title" id="xiangmujingyan" style="display:none">
						<h3 class="handle">项目经验</h3>
						<div class="info changeable placeholder" placeholder="这里是项目经验这里是项目经验这里是项目经验这里是项目经验这里是项目经验这里是项目经验这里是项目经验这里是项目经验这里是项目经验" contenteditable="false">这里是项目经验这里是项目经验这里是项目经验这里是项目经验这里是项目经验这里是项目经验这里是项目经验这里是项目经验这里是项目经验</div>
						</li>    
				      </ul>
					  <div class="s01"></div>
				   </div>
				
				 <div class="zbox fr">
				      <ul id="right_ul">
				      	<li class="d4 m_title" id="jibenxinxi">
                        <div class="jl_title"><h3 class="handle">基本信息<a class="addpartA" href="javascript:"><img src="img/i_bj.png" /></a></h3></div>
						<div class="info">
						<div class="jb1" id="jibenxinxi1">
                            <div class="m_part"><div class="inline changeable placeholder" placeholder="生日">生日</div>：<div class="inline changeable placeholder" placeholder="1991年11月06日">1991年11月06日</div><img class="deletepart" src="img/i_jian.png"><br/></div>
                            <div class="m_part"><div class="inline changeable placeholder" placeholder="院校">院校</div>：<div class="inline changeable placeholder" placeholder="武汉职业技术学院">武汉职业技术学院</div><img class="deletepart" src="img/i_jian.png"><br/></div>
                            <div class="m_part"><div class="inline changeable placeholder" placeholder="籍贯">籍贯</div>：<div class="inline changeable placeholder" placeholder="湖北孝感">湖北孝感</div><img class="deletepart" src="img/i_jian.png"><br/></div>
				            <div class="m_part"><div class="inline changeable placeholder" placeholder="专业">专业</div>：<div class="inline changeable placeholder" placeholder="平面设计">平面设计</div><img class="deletepart" src="img/i_jian.png"><br/></div>
				            <div class="m_part"><div class="inline changeable placeholder" placeholder="现居">现居</div>：<div class="inline changeable placeholder" placeholder="湖北武汉">湖北武汉</div><img class="deletepart" src="img/i_jian.png"><br/></div>
						</div>
						</div>
						</li>
						
						<li class="d4 m_title" id="lianxifangshi">
                        <div class="jl_title"><h3 class="handle">联系方式<a class="addpartA" href="javascript:"><img src="img/i_bj.png" /></a></h3></div>
						<div class="info">
						<div class="jb1" id="lianxifangshi1">
                            <div class="m_part"><div class="inline changeable placeholder" placeholder="手机">手机</div>：<div class="inline changeable placeholder" placeholder="135 4656 4563">135 4656 4563</div><img class="deletepart" src="img/i_jian.png"><br/></div>
                            <div class="m_part"><div class="inline changeable placeholder" placeholder="邮箱">邮箱</div>：<div class="inline changeable placeholder" placeholder="45441654@qq.com">45441654@qq.com</div><img class="deletepart" src="img/i_jian.png"><br/></div>
                            <div class="m_part"><div class="inline changeable placeholder" placeholder="Q Q">Q Q</div>：<div class="inline changeable placeholder" placeholder="546365464">546365464</div><img class="deletepart" src="img/i_jian.png"><br/></div>
							<div class="m_part"><div class="inline changeable placeholder" placeholder="地址">地址</div>：<div class="inline changeable placeholder" placeholder="湖北武汉市">湖北武汉市</div><img class="deletepart" src="img/i_jian.png"><br/></div>
						</div>
						<!--div class="set">
							<a href="#"><img src="img/i_bj.png" /></a>
							<a href="#"><img src="img/i_pf.png" /></a>
							<a href="#"><img src="img/i_set.png" /></a>
						</div-->
						</div>
						</li>
						
				        <li class="d4 d5 m_title" id="jinengzhengshu">
                        <div class="jl_title"><h3 class="handle">技能证书<a class="addpartC" href="javascript:"><img src="img/i_bj.png" /></a></h3></div>
						<div class="info">
						<div class="jb1" id="jinengzhengshu1">
                            <div class="addpart"><img src="img/i_zs.png"/>
                            <div class="inline changeable placeholder" placeholder="CET-6，优秀的听说写能力">CET-6，优秀的听说写能力</div><img class="deletepart" src="img/i_jian.png"><br/>
                            </div>
                            <div class="addpart"><img src="img/i_zs.png"/>
                            <div class="inline changeable placeholder" placeholder="计算机二级，熟悉计算机各项操作">计算机二级，熟悉计算机各项操作</div><img class="deletepart" src="img/i_jian.png"><br/>
                            </div>
                            <div class="addpart"><img src="img/i_zs.png"/>
                            <div class="inline changeable placeholder" placeholder="高级营销员，国家职业资格四级">高级营销员，国家职业资格四级</div><img class="deletepart" src="img/i_jian.png"><br/>
                            </div>
						</div>
						</div>
						</li>
                        <li class="m_title" id="shixijingyan" style="display:none">
                        <div class="jl_title"><h3 class="handle">实习经验</h3></div>
						<div class="info changeable placeholder" placeholder="这里是实习经验这里是实习经验这里是实习经验这里是实习经验这里是实习经验这里是实习经验这里是实习经验这里是实习经验这里是实习经验这里是实习经验这里是实习经验" contenteditable="false">这里是实习经验这里是实习经验这里是实习经验这里是实习经验这里是实习经验这里是实习经验这里是实习经验这里是实习经验这里是实习经验这里是实习经验这里是实习经验</div>
						</li>  
				      </ul>
				   </div>
				
				
				</div>
			</div>
		</div>
	</div>
	<!--endprint-->  	
	</div>
    </div>    
</div>   
</div>
   
</div>

<!--当前简历id-->     
<input type="hidden" id="modelid" value="S10004">    

<div class="dfoot"></div>
<!--footer-->
<div class="footer">
	<div class="cont">
		<div class="ft1">
			<img src="img/flogo.png"/><br />
			<img src="img/ewm.png" width="120"/>
		</div>
		<div class="ft2">
			<dl>
				<dt>联系我们</dt>
<dd><a href="#">在线客服</a></dd>
<dd><a href="#">微信</a></dd>
<dd><a href="#">微博</a></dd>
<dd><a href="#">知乎</a></dd>
			</dl>
			
			<dl>
				<dt>关于我们</dt>
<dd><a href="#">首页</a></dd>
<dd><a href="#">使用条款</a></dd>
<dd><a href="#">隐私协议</a></dd>
<dd><a href="#">加入我们</a></dd>
			</dl>
			
			<dl>
				<dt>快速进入</dt>
<dd><a href="#">我的简历</a></dd>
<dd><a href="#">简历攻略</a></dd>
<dd><a href="#">导师辅导</a></dd>
<dd><a href="#">职位列表</a></dd>
<dd><a href="#">使用帮助</a></dd>
			</dl>
			
			<dl>
				<dt>简历模板</dt>
<dd><a href="#">经典工作简历</a></dd>
<dd><a href="#">秋招礼包</a></dd>
<dd><a href="#">程序员简历模板</a></dd>
			</dl>
			
			<dl>
				<dt>合作伙伴</dt>
<dd><a href="#">Linkedln</a></dd>
<dd><a href="#">智联招聘</a></dd>
<dd><a href="#">前程无忧</a></dd>
<dd><a href="#">猎聘</a></dd>
			</dl>
			
			<dl>
				<dt>友情链接</dt>
<dd><a href="#">爱思益</a></dd>
<dd><a href="#">无界空间</a></dd>
<dd><a href="#">inDeco</a></dd>
<dd><a href="#">ViaX</a></dd>
<dd><a href="#">站长之家</a></dd>
			</dl>
		</div>
		<div class="copyright">
			©2018 润简历 runjianli.com | 京ICP备17055181号
		</div>
	</div>
</div>
<script>
$('#close').click(function(){
$('.top').css('display','none')
});

//拖动
$(".handle").on('mouseover',function(){
    $(this).css("cursor","move")
}); 

var index;//用来关闭load层
layui.use('layer', function(){    
    var layer = layui.layer;
})
    
var $list = $('#module_list');
	
	$list.sortable({
		opacity: 0.6, //设置拖动时候的透明度
		revert: true, //缓冲效果
		cursor: 'move', //拖动的时候鼠标样式
		items: '.m_title', 
        handle: '.handle',
        start:function(){
           // var a =  $(this).position();
           // layer.msg(a);
        },
        update:function(){
            //innerhtmlinput();
            innerhtmlinput1();////模板分区json传入
          /*    
            */
        } 
	});    
//拖动   

//布局顺序存入
var oldleft_order = [];
var oldright_order = [];
var newleft_order = [];
var newright_order = [];
var old_order = [];//储存最初始的div排列顺序
var new_order = [];//最新的div排列顺序     
function innerhtmlinput1()//拖动存入
{
     newleft_order = [];
     newright_order = [];
     $("#left_ul").children(".m_title").each(function(){
        newleft_order.push(this.id);
     })
     $("#right_ul").children(".m_title").each(function(){
        newright_order.push(this.id);
     })
     for(var i=0;i<newleft_order.length;i++)
     {    
        new_order[i],newleft_order[i];
     }
     for(var i=0;i<newright_order.length;i++)
     {    
        new_order[i+newleft_order.length] = newright_order[i];
     }
     var oldleft_order1 = oldleft_order.toString();
     var oldright_order1 = oldright_order.toString();
     var newleft_order1 = newleft_order.toString();
     var newright_order1 = newright_order.toString();
     //alert(oldleft_order1);
     //alert(oldright_order1);
     //alert(newleft_order1);
     //alert(newright_order1);
     if(cv_id == null)
     {    
         $.ajax({  
            type: "post",  
            url: "http://www.runjianli.com/index.php/cv/cv_model/cv_keep_div",
			dataType: "text",
            data:{"old_leftorder":oldleft_order1,"new_leftorder":newleft_order1,"old_rightorder":oldright_order1,"new_rightorder":newright_order1},
            success: function(data){
                //alert("success");
            },
			error: function(jqXHR, textStatus, errorThrown){  
                alert(jqXHR.responseText);
				alert(jqXHR.status);
				alert(jqXHR.readyState);
				alert(jqXHR.statusText);
				alert(textStatus);
				alert(errorThrown); 
			}
        })
    }
    else
    {    
        $.ajax({  
            type: "post",  
            url: "http://www.runjianli.com/index.php/cv/cv_model/cv_keep_div1",
			dataType: "text",
            data:{"old_leftorder":oldleft_order1,"new_leftorder":newleft_order1,"old_rightorder":oldright_order1,"new_rightorder":newright_order1,"cv_id":cv_id},
            success: function(data){
                //alert("success");
            },
			error: function(jqXHR, textStatus, errorThrown){  
                alert(jqXHR.responseText);
				alert(jqXHR.status);
				alert(jqXHR.readyState);
				alert(jqXHR.statusText);
				alert(textStatus);
				alert(errorThrown); 
			}
        })
    }
}    
//布局顺序存入 
    
//简历cvid加载
var cv_id = oneValues();
//获取地址？后的内容    
function oneValues(){
		var result;
		var url=window.location.search; //获取url中"?"符后的字串  
		if(url.indexOf("?")!=-1){
			result = url.substr(url.indexOf("=")+1);
		}
	return result;
	}    
if(cv_id == null)
{    
$.ajax({  
            type: "post",  
            url: "http://www.runjianli.com/index.php/cv/cv_model/cv_keep",
			dataType: "text", 			
            success: function(data){
                layui.use('layer', function(){
                    var layer = layui.layer;
                    layer.msg(data);
                });
            },
			error: function(jqXHR, textStatus, errorThrown){  
                alert(jqXHR.responseText);
				alert(jqXHR.status);
				alert(jqXHR.readyState);
				alert(jqXHR.statusText);
				alert(textStatus);
				alert(errorThrown); 
			}
        })  
}
else
{
$.ajax({  
            type: "post",  
            url: "http://www.runjianli.com/index.php/cv/cv_model/innerhtml_read",
			dataType: "json",
            data:{"cv_id":cv_id},
            success:function(data){
                if(data.changesign == '1')
                {   
                smsTypeDesc = JSON.parse(data.jsonhtml); 
                var module_list = document.getElementById("module_list");    
                var items = module_list.getElementsByTagName("li");
                for(var i=0;i<items.length;i++)
                {
                    //var key = items[i].id;
                    //smsTypeDesc[key] = items[i].innerHTML;
                    for(var key in smsTypeDesc)
                    {
                        if(key == items[i].id)
                        {   
                            //alert(key);
                            var a = document.getElementById(key);
                            a.innerHTML = smsTypeDesc[key];
                            break;
                        }
                    }
                }    
                }
                else
                {  
                $('.m_title').remove()
                //给简历所需数据初始化
                smsTypeDesc = JSON.parse(data.jsonhtml);
                showorhide = JSON.parse(data.showorhidehtml);
                slideword = JSON.parse(data.slidewordhtml); 
                title = data.cv_title;
                extrahtml = JSON.parse(data.extrahtml);
                for(var key in extrahtml){
                    var a = document.getElementById(key);
                    a.innerHTML = extrahtml[key];
                }
                if(data.headimg == null)
                {    
                }
                else
                {    
                    $("#headimg1").attr("src",data.headimg);
                }
                var newleftorder = data.new_leftorder.split(",");
                var newrightorder = data.new_rightorder.split(",");
                for(var i=0; i<newleftorder.length; i++)
                {    
                    var li = document.createElement('li');
                    li.setAttribute("class","m_title");
                    li.setAttribute("id",newleftorder[i]);
                    if(showorhide[newleftorder[i]] == "true")
                    {    
                        li.setAttribute("style","display:block");
                    }
                    else
                    {    
                        li.setAttribute("style","display:none");
                    }
                    li.innerHTML = smsTypeDesc[newleftorder[i]];
                    var ul = document.getElementById('left_ul');
                    ul.insertBefore(li,ul.lastChild);
                }
                for(var i=0; i<newrightorder.length; i++)
                {    
                    var li = document.createElement('li');
                    li.setAttribute("class","m_title");
                    li.setAttribute("id",newrightorder[i]);
                    if(showorhide[newrightorder[i]] == "true")
                    {    
                        li.setAttribute("style","display:block");
                    }
                    else
                    {    
                        li.setAttribute("style","display:none");
                    }
                    li.innerHTML = smsTypeDesc[newrightorder[i]];
                    var ul = document.getElementById('right_ul');
                    ul.insertBefore(li,ul.lastChild);
                }
                $("#ulhide").children("li").remove();
                $("#ulshow").children("li").remove();
                var li = document.createElement('li');
                li.setAttribute("style","display:block");
                //divx.setAttribute("id",str);
		        //设置div的属性
		        li.innerHTML = '<a href="javascript:rightcreate()">模块添加</a><a href="javascript:rightcreate()"><img src="img/i_jia.png" /></a>'; //设置显示的数据，可以是标签．
		        //divx.style.background = "blue";//设置css样式,s设置背景颜色
		        var ul = document.getElementById("ulhide");//获取body对象.
                ul.insertBefore(li,ul.lastChild);
                for(var key in showorhide)
                {    
                    if(showorhide[key] == "true")
                    {   
                        var li1 = document.createElement('li');
                        var li2 = document.createElement('li');
                        var strshow = key+"show";
                        var strhide = key+"hide";
                        li1.setAttribute("id",strshow);
                        li2.setAttribute("id",strhide);
                        li2.setAttribute("style","display:none");
                        li1.innerHTML = '<a href="javascript:hide(\''+key+'\')">'+slideword[key]+'</a><a href="javascript:hide(\''+key+'\')"><img src="img/i_jian.png"/></a>';
                        li2.innerHTML = '<a href="javascript:show(\''+key+'\')">'+slideword[key]+'</a><a href="javascript:show(\''+key+'\')"><img src="img/i_jia.png"/></a>';
                        var ul1 = document.getElementById("ulshow");
                        var ul2 = document.getElementById("ulhide");
                        ul1.insertBefore(li1,ul1.lastChild);
                        ul2.insertBefore(li2,ul2.lastChild);
                    }
                    else
                    {    
                        var li1 = document.createElement('li');
                        var li2 = document.createElement('li');
                        var strshow = key+"show";
                        var strhide = key+"hide";
                        li1.setAttribute("id",strshow);
                        li2.setAttribute("id",strhide);
                        li1.setAttribute("style","display:none");
                        li1.innerHTML = '<a href="javascript:hide(\''+key+'\')">'+slideword[key]+'</a><a href="javascript:hide(\''+key+'\')"><img src="img/i_jian.png"/></a>';
                        li2.innerHTML = '<a href="javascript:show(\''+key+'\')">'+slideword[key]+'</a><a href="javascript:show(\''+key+'\')"><img src="img/i_jia.png"/></a>';
                        var ul1 = document.getElementById("ulshow");
                        var ul2 = document.getElementById("ulhide");
                        ul1.insertBefore(li1,ul1.lastChild);
                        ul2.insertBefore(li2,ul2.lastChild);
                    }
                }
                }
            },
			error: function(jqXHR, textStatus, errorThrown){  
                alert(jqXHR.responseText);
				alert(jqXHR.status);
				alert(jqXHR.readyState);
				alert(jqXHR.statusText);
				alert(textStatus);
				alert(errorThrown); 
			}
        })    
}    
//简历cvid加载  
    
    
    
$(function(){ 
//div可编辑    
$('#module_list').on('click','.changeable',function(){
    $(this).attr("contenteditable","true");
});
/*    
$('#module_list').on('hover','.changeable',function(){
    $(this).addClass("hoverboder");
});
*/
$('#module_list').on('blur','.changeable',function(){
    $(this).attr("contenteditable","fasle");
    if($(this).html() == "")
    {    
        $(this).html($(this).attr("placeholder"));
    }
    //alert($(this).html());
    //$(this).removeClass("hoverboder");
    /*var key = $(this).parent().attr('id');
    smsTypeDesc[key] = $(this).parent().html();
    var jsonhtml =  JSON.stringify(smsTypeDesc);
    $.ajax({  
            type: "post",  
            url: "http://www.runjianli.com/index.php/cv/cv_model/innerhtml_input",
			dataType: "text",
            data:{"innerhtml":$('#module_list').html(),"modelid":$('#modelid').val(),"jsonhtml":jsonhtml},
            success:function(data){ 
                layer.msg('操作成功');
            },
			error: function(jqXHR, textStatus, errorThrown){  
                alert(jqXHR.responseText);
				alert(jqXHR.status);
				alert(jqXHR.readyState);
				alert(jqXHR.statusText);
				alert(textStatus);
				alert(errorThrown); 
			}
        })
    */    
});
//div可编辑 
})    
      
//简历导出    
function cv_input()
{
    if(typeof(title) == "undefined")
    {    
        layer.prompt({
            formType: 0,
            title: '给你的简历取个名字吧',
        }, function(value, index, elem){
            title = value;
            layer.close(index);
            innerhtml_input();
            cv_input1();
        })
    }
    else
    {   
        cv_input1();
    }

}    
function cv_input1()
{  
    $("#jl2_cat").hide();
    $("#jl2_left").hide();
    $(".addpartA").hide();
    $(".addpartB").hide();
    $(".addpartC").hide();
    $(".deletepart").hide();
    bdhtml=window.document.body.innerHTML; 
    sprnstr="<!--startprint-->"; 
    eprnstr="<!--endprint-->"; 
    prnhtml=bdhtml.substr(bdhtml.indexOf(sprnstr)+17); 
    prnhtml=prnhtml.substring(0,prnhtml.indexOf(eprnstr)); 
    //将获取的html代码添加到隐藏域中传给php文件处理
    $.ajax({  
            type: "post",  
            url: "http://www.runjianli.com/index.php/cv/cv_model/cv_input",
			dataType: "text",
            data:{"html":prnhtml},
            beforeSend:function(){
                index = layer.load();
            },
            success: function(data){
                //window.open(data);
                if(data == "请先登陆")
                {   
                    window.open("http://www.runjianli.com/sifang/login.html");
                    layer.close(index);
                }
                else
                {    
                    window.open("http://www.runjianli.com/index.php/cv/cv_spread/cvprint");
                    layer.close(index);
                }
                //layer.msg('简历导出成功', {icon: 6});
            },
			error: function(jqXHR, textStatus, errorThrown){  
                alert(jqXHR.responseText);
				alert(jqXHR.status);
				alert(jqXHR.readyState);
				alert(jqXHR.statusText);
				alert(textStatus);
				alert(errorThrown); 
			}
          })
    $(".addpartA").show();
    $(".addpartB").show();
    $(".addpartC").show();
    $("#jl2_cat").show();
    $("#jl2_left").show();
    $(".deletepart").show();
}
//简历导出

    
//简历保存
//简历显隐保存
var showorhide = {"gerenjianjie":"true","qiuzhiyixiang":"true","gongzuojingli":"true","jibenxinxi":"true","lianxifangshi":"true","jinengzhengshu":"true","shixijingyan":"false","xiangmujingyan":"false"};
var slideword = {"gerenjianjie":"个人中心","qiuzhiyixiang":"求职意向","gongzuojingli":"工作经历","jibenxinxi":"基本信息","lianxifangshi":"联系方式","jinengzhengshu":"技能证书","shixijingyan":"实验经验","xiangmujingyan":"项目经验"};    
//简历标题
var title;    
function cv_save()
{
    if(typeof(title) == "undefined")
    {    
        layer.prompt({
            formType: 0,
            title: '给你的简历取个名字吧',
        }, function(value, index, elem){
            title = value;
            layer.close(index);
            innerhtml_input();
            innerhtmlinput1();
        })
    }
    else
    {
        layer.confirm('您是否想换个简历名', {icon: 3, title:'提示', btn:['是','否']},function(index){
            layer.close(index);
            layer.prompt({
                formType: 0,
                title: '给你的简历取个名字吧',
                btn:['确定','取消'],
                btn2: function(){
                    innerhtml_input();
                    innerhtmlinput1();
                } 
            },function(value, index, elem){
                title = value;
                layer.close(index);
                innerhtml_input();
                innerhtmlinput1();
            })
        },function(index){
            innerhtml_input();
            innerhtmlinput1();
        });
    }
}
//文本信息存入
function innerhtml_input()
{
    var smsTypeDesc = {};
    var jl1information =  {};
    var module_list = document.getElementById("module_list");
    var items = module_list.getElementsByTagName("li");
    for(var i=0;i<items.length;i++)
    {
        var key = items[i].id;
        smsTypeDesc[key] = items[i].innerHTML;
    }
    jl1information["cvname"] = $("#cvname").html();
    jl1information["cvjob"] = $("#cvjob").html();
    jl1information["cvdate"] = $("#cvdate").html();
    jl1information["cvphone"] = $("#cvphone").html();
    var extrahtml = JSON.stringify(jl1information);
    var jsonhtml =  JSON.stringify(smsTypeDesc);
    var showorhidehtml =  JSON.stringify(showorhide);
    var slidewordhtml =  JSON.stringify(slideword);
    /*
    var key = $(this).parent().attr('id');
    smsTypeDesc[key] = $(this).parent().html();
    var jsonhtml =  JSON.stringify(smsTypeDesc);
    */
    $.ajax({  
            type: "post",  
            url: "http://www.runjianli.com/index.php/cv/cv_model/innerhtml_input",
			dataType: "text",
            data:{"innerhtml":"1","modelid":$('#modelid').val(),"jsonhtml":jsonhtml,"showorhidehtml":showorhidehtml,"slidewordhtml":slidewordhtml,"title":title,"extrahtml":extrahtml},
            beforeSend:function(){
                index = layer.load();
            },
            success:function(data){
                if(data == "请先登陆")
                {
                    window.open("http://www.runjianli.com/sifang/login.html");
                    layer.close(index);
                }
                else
                {   
                    layer.close(index);
                    layer.msg('简历保存成功', {icon: 6});
                }
            },
			error: function(jqXHR, textStatus, errorThrown){  
                alert(jqXHR.responseText);
				alert(jqXHR.status);
				alert(jqXHR.readyState);
				alert(jqXHR.statusText);
				alert(textStatus);
				alert(errorThrown); 
			}
        })
}
//简历保存 

//简历模块显隐
  
function hide(vitaid)
{   
    var soh = document.getElementById(vitaid);
    soh.setAttribute("style","display:none");
    var sss = vitaid+"show";
    var sss1 = document.getElementById(sss);
    sss1.setAttribute("style","display:none");
    var hhh = vitaid+"hide";
    var hhh1 = document.getElementById(hhh);
    hhh1.setAttribute("style","display:block");
    showorhide[vitaid] = "false";
}
function show(vitaid)
{   
    var soh = document.getElementById(vitaid);
    soh.setAttribute("style","display:block");
    var sss = vitaid+"show";
    var sss1 = document.getElementById(sss);
    sss1.setAttribute("style","display:block");
    var hhh = vitaid+"hide";
    var hhh1 = document.getElementById(hhh);
    hhh1.setAttribute("style","display:none");
    showorhide[vitaid] = "true";
}
//简历模块显隐
       
//简历自定义模块添加
var right_count = 1;    
function rightcreate()
{
    layui.use('layer', function(){
        var layer = layui.layer;
            layer.open({
				type: 2,
				title: '添加自定义模块',
				resize: false,
				scrollbar: false,
				skin: 'layui-layer-molv',
				area: ['568px', '350px'],
				shadeClose: false, //点击遮罩关闭
				content: ['newcreate.html' , 'no'] 
            });
    })
}    
//简历自定义模块添加

//简历头像录入
//上传简历头像信息
document.getElementById("headimg").addEventListener("change",function () {
        $.ajax({  
            type: "post",  
            url: "http://www.runjianli.com/index.php/cv/cv_model/headimg",
			dataType: "text",
            data:new FormData(document.getElementById("tf")),
            processData:false,
            contentType:false,
            success: function(data){  
                var headimg1 = document.getElementById("headimg1"); 
                headimg1.src = data;
            },  
			error: function(jqXHR, textStatus, errorThrown){  
                  alert(jqXHR.responseText);
		          alert(jqXHR.status);
		          alert(jqXHR.readyState);
		          alert(jqXHR.statusText);
		          alert(textStatus);
		          alert(errorThrown); }
        })
});    
//简历头像录入

//上部信息弹窗录入    
function jl1information()
{
    layui.use('layer', function(){
		var layer = layui.layer;
		layer.open({
			type: 2,
			title: '编辑基本信息',
			resize: false,
			scrollbar: false,
			skin: 'layui-layer-molv',
			area: ['618px', '290px'],
			shadeClose: false, //点击遮罩关闭
			content: ['jl1information.html' , 'no'] 
		});
	})
}    
//上部信息弹窗录入
    
//每块内部块添加与删除    
$('#module_list').on('click','.addpartA',function(){
    var id = $(this).parent().parent().parent().children().children('.jb1').attr('id');
    layer.confirm('您是否想新增一个条目', {icon: 3, title:'提示', btn:['是','否']},function(index){
            layer.close(index);
            var div = document.createElement("div");
            div.setAttribute("class","m_parta");
            div.innerHTML = "<div class=\"inline changeable placeholder\" placeholder=\"内容\">内容</div>：<div class=\"inline changeable placeholder\" placeholder=\"这里是内容\">这里是内容</div><img class=\"deletepart\" src=\"img/i_jian.png\"><br/>";
            var divx = document.getElementById(id);
            divx.insertBefore(div,divx.lastChild);
        },function(index){
            layer.close(index);
        });
});
$('#module_list').on('click','.addpartB',function(){
    var id = $(this).parent().parent().parent().children('.d3').attr('id');
    layer.confirm('您是否想新增一个条目', {icon: 3, title:'提示', btn:['是','否']},function(index){
            layer.close(index);
            var dd = document.createElement("dd");
            dd.setAttribute("class","m_partb");
            dd.innerHTML = "<div class=\"changeable placeholder h3\" placeholder=\"这里填就职公司\">这里填就职公司</div><img class=\"deletepart\" src=\"img/i_jian.png\"><div class=\"zhi\"><div class=\"changeable placeholder inline\" placeholder=\"这里填当时职位\">这里填当时职位</div><div class=\"changeable placeholder inline\" placeholder=\"这里填在职时间\">这里填在职时间</div></div><div class=\"txt changeable placeholder\" placeholder=\"这里是主要工作这里是主要工作这里是主要工作这里是主要工作这里是主要工作这里是主要工作这里是主要工作\">这里是主要工作这里是主要工作这里是主要工作这里是主要工作这里是主要工作这里是主要工作这里是主要工作</div>";
            var dl = document.getElementById(id);
            dl.insertBefore(dd,dl.lastChild);
        },function(index){
            layer.close(index);
        });
}); 
$('#module_list').on('click','.addpartC',function(){
    var id = $(this).parent().parent().parent().children().children('.jb1').attr('id');
    layer.confirm('您是否想新增一个条目', {icon: 3, title:'提示', btn:['是','否']},function(index){
            layer.close(index);
            var div = document.createElement("div");
            div.setAttribute("class","m_partc");
            div.innerHTML = "<img src=\"img/i_zs.png\"/><div class=\"inline changeable placeholder\" placeholder=\"这里是内容\">这里是内容</div><img class=\"deletepart\" src=\"img/i_jian.png\"><br/>";
            var divx = document.getElementById(id);
            divx.insertBefore(div,divx.lastChild);
        },function(index){
            layer.close(index);
        });
});  
$('#module_list').on('click','.deletepart',function(){
    var parent = $(this).parent();
    layer.confirm('您是否想删除这个条目', {icon: 3, title:'提示', btn:['是','否']},function(index){
            layer.close(index);    
            parent.remove();
        },function(index){
            layer.close(index);
        });
});    
//每块内部块添加与删除  

//模板切换    
function modelchange(modelid)
{   
    //innerhtml_input();
    //innerhtmlinput1();
    $.ajax({  
            type: "post",  
            url: "http://www.runjianli.com/index.php/cv/cv_model/getcvid",
			dataType: "text",
            success: function(data){  
                    if(modelid == "S10004")
                    {
                        window.open("http://www.runjianli.com/sifang/cvedit.html?cv_id="+data);
                    }
                    else if(modelid == "S10005")
                    {
                        window.open("http://www.runjianli.com/sifang/cvedita.html?cv_id="+data);
                    }    
            },  
			error: function(jqXHR, textStatus, errorThrown){  
                  alert(jqXHR.responseText);
		          alert(jqXHR.status);
		          alert(jqXHR.readyState);
		          alert(jqXHR.statusText);
		          alert(textStatus);
		          alert(errorThrown); }
        })
}   
//模板切换
   
//关闭提醒保存

//关闭提醒保存    
</script>
</body>
</html>