<!DOCTYPE html> 
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>企业认证</title>
<link rel="stylesheet" href="layui-v2.2.6/layui-v2.2.6/layui/css/layui.css" type="text/css">
<link rel="stylesheet" href="mademodel.css" type="text/css">
<script src="layer-v3.1.1/layer-v3.1.1/layer/layer.js" type="text/javascript" charset="utf-8"></script>
<script src="layui-v2.2.6/layui-v2.2.6/layui/layui.js" type="text/javascript" charset="utf-8"></script>
<script src="jquery.js" type="text/javascript"></script>
<script src="jqui/jqui/jquery-ui.js"></script>
<script src="sifang/jquery-form.js"></script> <!-- 你必须先引入jQuery1.8或以上版本 -->
<script src="vue.js"></script>
<script charset="utf-8" src="kindeditor/kindeditor-all.js"></script>
<script charset="utf-8" src="kindeditor/lang/zh-CN.js"></script>
</head>
<body class="layui-layout-body">
<div class="layui-layout layui-layout-admin">
  <div class="layui-header">
    <div class="layui-logo">企业认证</div>
  </div>
  
  <div class="layui-side layui-bg-black">
    <div class="layui-side-scroll">
      <!-- 左侧导航区域（可配合layui已有的垂直导航） -->
    </div>
  </div>
  <div class="layui-body container-body">
    <!-- 内容主体区域 -->
<!--第一步-->       
<form class="layui-form" id="tf" style="display:block">
  <div class="modelmade-top head-font">请先填写您企业的基本信息</div>    
  <div class="modelmade-top"></div>    
  <div class="layui-form-item" id="nickname">
    <label class="layui-form-label">公司名</label>
    <div class="layui-input-block">
      <input type="text" name="company" required  lay-verify="required" placeholder="请输入公司名" autocomplete="off" class="layui-input">
    </div>
  </div>
  <div class="layui-form-item" id="career">
    <label class="layui-form-label">法人代表姓名</label>
    <div class="layui-input-block">
      <input type="text" name="name" required  lay-verify="required" placeholder="请输入公司法人代表姓名" autocomplete="off" class="layui-input">
    </div>
  </div> 
  <div class="layui-form-item">
    <label class="layui-form-label">法人代表身份证</label>
    <div class="layui-input-block">
      <input type="text" name="id_card" required  lay-verify="required" placeholder="请输入公司法人代表身份证" autocomplete="off" class="layui-input">
    </div>
  </div>
  <div class="layui-form-item">
    <label class="layui-form-label">公司社会统一信用代码</label>
    <div class="layui-input-block">
      <input type="text" name="credit_code" required  lay-verify="required" placeholder="公司社会统一信用代码" autocomplete="off" class="layui-input">
    </div>
  </div>  
  <div class="layui-form-item">
    <label class="layui-form-label">公司所在地</label>
    <div class="layui-input-block">
      <input type="text" name="address" required  lay-verify="required" placeholder="请输入公司所在地" autocomplete="off" class="layui-input">
    </div>
  </div>  
  <div class="layui-form-item">
    <label class="layui-form-label">公司邮箱</label>
    <div class="layui-input-block">
      <input type="text" name="email" required  lay-verify="required" placeholder="请输入公司邮箱" autocomplete="off" class="layui-input">
    </div>
  </div>
  <div class="layui-form-item">
    <label class="layui-form-label">客服电话</label>
    <div class="layui-input-block">
      <input id="iphone" type="text" name="phone" required  lay-verify="required" placeholder="请输入公司电话" autocomplete="off" class="layui-input">
    </div>
  </div>
  <div class="layui-form-item">
    <div class="layui-input-block">
      <button type="button" class="layui-btn" onclick="javascript:basesubmit()">立即提交</button>
      <button type="reset" class="layui-btn layui-btn-primary">重置</button>
    </div>
  </div>
  <div class="layui-form-item" id="next_step" style="display:none">
    <div class="layui-input-block">
      <button type="button" class="layui-btn layui-btn-fluid" onclick="javascript:nextstep()">下一步</button>
    </div>
  </div>
</form>
<!--第二步-->    
<form class="layui-form" id="tf1" style="display:none">
  <div class="modelmade-top head-font">请上传您的相关证件</div>    
  <div class="modelmade-top"></div>    
  <div class="layui-form-item">
  <div class="layui-upload">
    <label class="layui-form-label">公司营业执照</label> 
    <div class="layui-input-block"> 
    <button type="button" class="layui-btn layui-bg-blue" id="test1">选择图片</button>
        <blockquote class="layui-elem-quote layui-quote-nm" style="margin-top: 10px;">
            预览图：
            <div class="layui-upload-list" id="demo1"></div>
        </blockquote>
    </div>
  </div>
  </div>
  <div class="layui-form-item">
  <div class="layui-upload">
    <label class="layui-form-label">身份证正面图像</label>  
    <div class="layui-input-block">
    <button type="button" class="layui-btn layui-bg-blue" id="test2">选择图片</button> 
        <blockquote class="layui-elem-quote layui-quote-nm" style="margin-top: 10px;">
            预览图：
            <div class="layui-upload-list" id="demo2"></div>
        </blockquote>
    </div>
  </div>
  </div>
  <div class="layui-form-item">
  <div class="layui-upload">
    <label class="layui-form-label">身份证背面图像</label> 
    <div class="layui-input-block">  
    <button type="button" class="layui-btn layui-bg-blue" id="test3">选择图片</button>    
        <blockquote class="layui-elem-quote layui-quote-nm" style="margin-top: 10px;">
            预览图：
            <div class="layui-upload-list" id="demo3"></div>
        </blockquote>
    </div>    
  </div>
  </div>    
  <div class="layui-form-item">
    <div class="layui-input-block">
      <button type="button" class="layui-btn layui-btn-fluid" onclick="javascript:nextnextstep()">下一步</button>
    </div>
  </div>
</form>      
<input type="hidden" id="hd1">
<input type="hidden" id="hd2">
<input type="hidden" id="hd3">      
<!--第三步-->  
<form id="tf2" class="layui-form" style="display:none">
<div class="modelmade-top head-font">请您支付第三方认证费用</div>    
<div class="modelmade-top"></div>     
<div class="layui-form-item">    
    <label class="layui-form-label">微信支付</label>
    <div class="layui-input-block">
      <button type="button" class="layui-btn layui-bg-blue" onclick="javascript:wx_pay()">点击支付</button>
    </div>
</div>
<div class="layui-form-item">
    <div class="layui-input-block">
      <button type="button" class="layui-btn layui-btn-fluid" onclick="javascript:nextnextnextstep()">下一步</button>
    </div>
</div>    
</form>      

<div id="tf3" style="display:none">
<div class="modelmade-top head-font">请耐心等候</div>
</div>      
</div>
  
  <div class="layui-footer">
    <!-- 底部固定区域 -->
    © layui.com - 底部固定区域
  </div>
</div>
<script>
var hd1 = document.getElementById("hd1"); 
var hd2 = document.getElementById("hd2");
var hd3 = document.getElementById("hd3");     
layui.use('upload', function(){
  var upload = layui.upload;
   
  //多图片上传
  var uploadInst1 = upload.render({
    elem: '#test1'
    ,url: 'http://www.runjianli.com/index.php/cert/company_cert/cert_imag3'
    ,multiple: false
    ,auto: true
    //,bindAction: '#testListAction1'  
    ,before: function(obj){
      //预读本地文件示例，不支持ie8
      obj.preview(function(index, file, result){
        $('#demo1').append('<img src="'+ result +'" alt="'+ file.name +'" class="layui-upload-img">')
      });
    }
    ,done: function(res){
      hd1.value = "上传成功";
      alert(hd1.value);
    }
  });
  var uploadInst2 = upload.render({
    elem: '#test2'
    ,url: 'http://www.runjianli.com/index.php/cert/company_cert/cert_imag1'
    ,multiple: false
    ,auto: true
    //,bindAction: '#testListAction2'  
    ,before: function(obj){
      //预读本地文件示例，不支持ie8
      obj.preview(function(index, file, result){
        $('#demo2').append('<img src="'+ result +'" alt="'+ file.name +'" class="layui-upload-img">')
      });
    }
    ,done: function(){
      hd2.value = "上传成功";
      alert(hd2.value);
    }
  });
  var uploadInst3 = upload.render({
    elem: '#test3'
    ,url: 'http://www.runjianli.com/index.php/cert/company_cert/cert_imag2'
    ,multiple: false
    ,auto: true
    //,bindAction: '#testListAction3'  
    ,before: function(obj){
      //预读本地文件示例，不支持ie8
      obj.preview(function(index, file, result){
        $('#demo3').append('<img src="'+ result +'" alt="'+ file.name +'" class="layui-upload-img">')
      });
    }
    ,done: function(){
      hd3.value = "上传成功";
      alert(hd3.value);
    }
  });    
});    
    
    
    
function basesubmit(){
  //监听提交
$.ajax({  
         type: "post",  
         url: "http://www.runjianli.com/index.php/cert/company_cert/companycert_info",
	     dataType: "text",
	     data:$('#tf').serialize(),			
         success: function(data){  
            alert(data);
            $('#next_step').show(); 
         },  
	     error: function(jqXHR, textStatus, errorThrown){  
            alert(jqXHR.responseText);
		    alert(jqXHR.status);
		    alert(jqXHR.readyState);
		    alert(jqXHR.statusText);
		    alert(textStatus);
		    alert(errorThrown); 
          }
     })                 
}
   
layui.use('form', function(){
  var form = layui.form; 
});

layui.use('form', function(){
  var form = layui.form;

  //监听提交
 form.on('submit(formDemo)', function(data){
  });
});
KindEditor.ready(function(K) {
  window.editor = K.create('#editor_id');
});

    
    
function nextstep()
{
    $('#tf').hide();
    $('#tf1').show();
}
    
function nextnextstep()
{
    if(hd1.value == "上传成功"&&hd2.value == "上传成功"&&hd3.value == "上传成功")
    {
        $('#tf1').hide();
        $('#tf2').show();
    }
    else
    {
        alert("请按要求上传!");
    }
}    
function nextnextnextstep()
{
    $.ajax({  
                    type: "get",  
                    url: "http://www.runjianli.com/index.php/cert/cert/cert_judge",
	                dataType: "text",			
                    success: function(data){  
                        if(data == "支付成功")
                        {
                            $('#tf2').hide();
                            $('#tf3').show();
                            alert(data);
                        }
                        else if(data == "支付失败")
                        {
                            alert("支付失败");
                        }
                    },  
	                error: function(jqXHR, textStatus, errorThrown){  
                        alert(jqXHR.responseText);
		                alert(jqXHR.status);
		                alert(jqXHR.readyState);
		                alert(jqXHR.statusText);
		                alert(textStatus);
		                alert(errorThrown); 
                    }
                })
}
    
    
function wx_pay()
{
    window.open("http://www.runjianli.com/index.php/cert/company_cert/cert_pay");
}
</script>>    

</body>

</html>